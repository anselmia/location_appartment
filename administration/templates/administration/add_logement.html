{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block extrahead %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'administration/css/add_logement.css' %}">
{% endblock %}

{% block content %}
<div class="container logement-form-container">
    <div class="logement-card">
        <div class="mb-3">
            <a href="{% url 'administration:dashboard' %}" class="btn btn-outline-secondary">
                ‚¨ÖÔ∏è Retour au tableau de bord
            </a>
        </div>

        <form method="post" class="logement-form">
            <h3 class="form-title">üè° Ajouter un logement</h3>
            {% csrf_token %}

            {% if form.errors %}
                <div class="alert alert-danger mt-3">
                    <ul class="mb-0">
                        {% for field in form %}
                            {% for error in field.errors %}
                                <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                            {% endfor %}
                        {% endfor %}
                        {% for error in form.non_field_errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

            <div class="row">
                <div class="col-md-6">
                    <h5 class="section-title">üìå Informations g√©n√©rales</h5>
                    <div class="form-field">
                        <label for="{{ form.name.id_for_label }}">{{ form.name.label }}</label>
                        {{ form.name|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.statut.id_for_label }}">{{ form.statut.label }}</label>
                        {{ form.statut|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.owner.id_for_label }}">{{ form.owner.label }}</label>
                        {{ form.owner|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <div class="admin-checkboxes">
                            {% for checkbox in form.admins %}
                                <div class="checkbox-wrapper">
                                    {{ checkbox }}  <!-- Renders the checkbox -->
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="form-field">
                        <label for="{{ form.type.id_for_label }}">{{ form.type.label }}</label>
                        {{ form.type|add_class:"form-input" }}
                      </div>
                    <div class="form-field">
                        <label for="{{ form.adresse.id_for_label }}">{{ form.adresse.label }}</label>
                        {{ form.adresse|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.ville.id_for_label }}">{{ form.ville.label }}</label>
                        {{ form.ville|add_class:"form-select" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.map_link.id_for_label }}">{{ form.map_link.label }}</label>
                        {{ form.map_link|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.description.id_for_label }}">{{ form.description.label }}</label>
                        {{ form.description|add_class:"form-textarea" }}
                    </div>

                    <hr class="my-4">

                    <h5 class="section-title">üåê Plateformes en ligne</h5>
                    <div class="form-field">
                    <label for="{{ form.airbnb_link.id_for_label }}">{{ form.airbnb_link.label }}</label>
                    {{ form.airbnb_link|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                    <label for="{{ form.airbnb_calendar_link.id_for_label }}">{{ form.airbnb_calendar_link.label }}</label>
                    {{ form.airbnb_calendar_link|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                    <label for="{{ form.booking_link.id_for_label }}">{{ form.booking_link.label }}</label>
                    {{ form.booking_link|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                    <label for="{{ form.booking_calendar_link.id_for_label }}">{{ form.booking_calendar_link.label }}</label>
                    {{ form.booking_calendar_link|add_class:"form-input" }}
                    </div>

                    <hr class="my-4">
                            
                    <h5 class="section-title">üõèÔ∏è Capacit√© et pi√®ces</h5>
                    <div class="form-field">
                        <label for="{{ form.max_traveler.id_for_label }}">{{ form.max_traveler.label }}</label>
                        {{ form.max_traveler|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.nominal_traveler.id_for_label }}">{{ form.nominal_traveler.label }}</label>
                        {{ form.nominal_traveler|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.superficie.id_for_label }}">{{ form.superficie.label }}</label>
                        {{ form.superficie|add_class:"form-input" }}
                        <span class="text-muted">m¬≤</span>
                    </div>                    
                    <div class="form-field">
                        <label for="{{ form.bathrooms.id_for_label }}">{{ form.bathrooms.label }}</label>
                        {{ form.bathrooms|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.bedrooms.id_for_label }}">{{ form.bedrooms.label }}</label>
                        {{ form.bedrooms|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.beds.id_for_label }}">{{ form.beds.label }}</label>
                        {{ form.beds|add_class:"form-input" }}
                    </div>
                    <div class="form-field checkbox-field">
                        <input type="checkbox" id="{{ form.smoking.id_for_label }}" name="{{ form.smoking.name }}" {{ form.smoking.value|yesno:"checked," }}>
                        <label for="{{ form.smoking.id_for_label }}">{{ form.smoking.label }}</label>
                    </div>
                      
                    <div class="form-field checkbox-field">
                        <input type="checkbox" id="{{ form.animals.id_for_label }}" name="{{ form.animals.name }}" {{ form.animals.value|yesno:"checked," }}>
                        <label for="{{ form.animals.id_for_label }}">{{ form.animals.label }}</label>
                    </div>
                </div>
        
                <div class="col-md-6">
                    <h5 class="section-title">üí∞ Tarification</h5>
                    <div class="form-field with-symbol">
                        <label for="{{ form.price.id_for_label }}">{{ form.price.label }}</label>
                        <div class="input-symbol">
                            {{ form.price|add_class:"form-input" }}
                            <span>‚Ç¨</span>
                        </div>
                    </div>
                    <div class="form-field with-symbol">
                        <label for="{{ form.fee_per_extra_traveler.id_for_label }}">{{ form.fee_per_extra_traveler.label }}</label>
                        <div class="input-symbol">
                            {{ form.fee_per_extra_traveler|add_class:"form-input" }}
                            <span>‚Ç¨</span>
                        </div>
                    </div>
                    <div class="form-field with-symbol">
                        <label for="{{ form.cleaning_fee.id_for_label }}">{{ form.cleaning_fee.label }}</label>
                        <div class="input-symbol">
                            {{ form.cleaning_fee|add_class:"form-input" }}
                            <span>‚Ç¨</span>
                        </div>
                    </div>
                    <div class="form-field with-symbol">
                        <label for="{{ form.caution.id_for_label }}">{{ form.caution.label }}</label>
                        <div class="input-symbol">
                            {{ form.caution|add_class:"form-input" }}
                            <span>‚Ç¨</span>
                        </div>
                    </div>
                    <div class="form-field with-symbol">
                        <label for="{{ form.refund_charge.id_for_label }}">{{ form.refund_charge.label }}</label>
                        <div class="input-symbol">
                            {{ form.refund_charge|add_class:"form-input" }}
                            <span>%</span>
                        </div>
                    </div>
                    <div class="form-field with-symbol">
                        <label for="{{ form.tax.id_for_label }}">{{ form.tax.label }}</label>
                        <div class="input-symbol">
                            {{ form.tax|add_class:"form-input" }}
                            <span>%</span>
                        </div>
                    </div>
                    <div class="form-field with-symbol">
                        <label for="{{ form.tax_max.id_for_label }}">{{ form.tax_max.label }}</label>
                        <div class="input-symbol">
                            {{ form.tax_max|add_class:"form-input" }}
                            <span>‚Ç¨</span>
                        </div>
                    </div>

                    <hr class="my-4">
        
                    <h5 class="section-title">‚è±Ô∏è P√©riodes et horaires</h5>
                    <div class="form-field">
                        <label for="{{ form.cancelation_period.id_for_label }}">{{ form.cancelation_period.label }}</label>
                        {{ form.cancelation_period|add_class:"form-input" }}
                        <span class="text-muted">jour(s)</span>
                    </div>
                    <div class="form-field">
                        <label for="{{ form.ready_period.id_for_label }}">{{ form.ready_period.label }}</label>
                        {{ form.ready_period|add_class:"form-input" }}
                        <span class="text-muted">jour(s)</span>
                    </div>
                    <div class="form-field">
                        <label for="{{ form.entrance_hour_min.id_for_label }}">{{ form.entrance_hour_min.label }}</label>
                        {{ form.entrance_hour_min|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.entrance_hour_max.id_for_label }}">{{ form.entrance_hour_max.label }}</label>
                        {{ form.entrance_hour_max|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.leaving_hour.id_for_label }}">{{ form.leaving_hour.label }}</label>
                        {{ form.leaving_hour|add_class:"form-input" }}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.max_days.id_for_label }}">{{ form.max_days.label }}</label>
                        {{ form.max_days|add_class:"form-input" }}
                        <span class="text-muted">jour(s)</span>
                    </div>
                    <div class="form-field">
                        <label for="{{ form.availablity_period.id_for_label }}">{{ form.availablity_period.label }}</label>
                        {{ form.availablity_period|add_class:"form-input" }}
                        <span class="text-muted">mois</span>
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-submit">üíæ Enregistrer</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
{% endblock %}
