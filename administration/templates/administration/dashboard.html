{% extends "base.html" %}
{% load static %}
{% block extrahead %}
  {{ block.super }}
  <link rel="stylesheet"
        href="{% static 'administration/css/dashboard.css' %}">
{% endblock %}
{% block content %}
  <div class="admin-logement-container">
    <div class="admin-header">
      <div class="admin-header-title">
        <h2>Gestion des logements</h2>
        <p class="admin-subtitle">Gérez vos annonces, ajoutez ou modifiez les logements disponibles</p>
      </div>
      <a href="{% url 'administration:add_logement' %}"
         class="btn-add-logement">➕ Nouveau logement</a>
    </div>
    {% if logements %}
      <div class="logement-grid">
        {% for logement in logements %}
          <div class="logement-card">
            <a href="{% url 'administration:edit_logement' logement.id %}"
               class="logement-card-link">
              {% if logement.photos.first %}
                <img src="{{ logement.photos.first.image.url }}"
                     alt="{{ logement.name }}"
                     class="logement-thumb">
              {% else %}
                <div class="logement-thumb placeholder">📷</div>
              {% endif %}
              <div class="logement-card-body">
                <h3 class="logement-title">{{ logement.name }}</h3>
                <p class="logement-city">
                  {% if logement.ville %}
                    {{ logement.ville.name }}
                  {% else %}
                    —
                  {% endif %}
                </p>
                <div class="logement-details">
                  <span>💰 {{ logement.price }} €</span>
                  <span>📐 {{ logement.superficie|default:"—" }} m²</span>
                  <span>🛏 {{ logement.bedrooms }} chambres</span>
                  <span>🚿 {{ logement.bathrooms }} sdb</span>
                  <span>👤 {{ logement.nominal_traveler }} pers.</span>
                </div>
                <div class="logement-tags">
                  <span class="tag type">{{ logement.get_type_display }}</span>
                  <span class="tag status {{ logement.statut }}">{{ logement.get_statut_display }}</span>
                </div>
              </div>
            </a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="no-logement">Aucun logement pour le moment.</div>
    {% endif %}
  </div>
{% endblock %}
