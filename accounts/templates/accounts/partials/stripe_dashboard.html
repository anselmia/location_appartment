{% load extra_tags %}
{% load static %}
<div class="card shadow rounded-4 border-0 mb-4">
  <div class="card-header text-white rounded-top-4">
    <h5 class="mb-0">💼 Compte Stripe</h5>
  </div>
  <div class="card-body">
    {% if not stripe_account %}
      <p class="text-muted mb-3">Aucun compte Stripe connecté pour le moment.</p>
      <a href="{% url 'accounts:create_stripe_account' %}"
         class="btn btn-primary">➕ Créer un compte Stripe</a>
    {% else %}
      <div class="mb-3">
        <div class="row gy-2">
          <div class="col-sm-6">
            <strong>ID Stripe :</strong>
            <div class="text-muted small">{{ stripe_account.id }}</div>
          </div>
          <div class="col-sm-6">
            <strong>Statut :</strong>
            <div class="small">
              {% if stripe_account.details_submitted %}
                <span class="badge-status validee">✅ Validé</span>
              {% else %}
                <span class="badge-status annulee">❌ Incomplet</span>
              {% endif %}
            </div>
          </div>
          <div class="col-sm-6">
            <strong>Pays :</strong>
            <div class="text-muted small">{{ stripe_account.country }}</div>
          </div>
          <div class="col-sm-6">
            <strong>État :</strong>
            <div class="small text-muted">{{ stripe_account.requirements.currently_due|length }} informations manquantes</div>
          </div>
        </div>
      </div>
      {% if stripe_account.requirements.currently_due %}
        <div class="alert alert-warning">
          ⚠️ Informations manquantes :
          <ul class="mb-0">
            {% for field in stripe_account.requirements.currently_due %}
              <li>
                <code>{{ field }}</code>
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
      <div class="d-flex flex-wrap gap-2 mt-3">
        <a href="{% url 'accounts:update_stripe_account' %}"
           class="btn btn-outline-primary">📝 Mettre à jour</a>
        {% if dashboard_link %}
          <a href="{{ dashboard_link }}"
             target="_blank"
             class="btn btn-outline-secondary">🔗 Ouvrir le Dashboard Stripe</a>
        {% endif %}
      </div>
    {% endif %}
  </div>
</div>
