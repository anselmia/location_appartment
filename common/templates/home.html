{% extends 'base.html' %}
{% load static %}
{% block title %}
    Location {{ entreprise.name }} – Appartement à louer sur la Côte d'Azur
{% endblock title %}
{% block meta_description %}
    Plateforme locale pour réserver un appartement ou une chambre à Nice et sur la Côte d’Azur. Tarifs directs, logements de qualité, service humain et réactif.
{% endblock %}
{% block extrahead %}
    {{ block.super }}
    <!-- Preload and preconnect for fonts -->
    <link rel="preload"
          as="image"
          href="{% if config.banner_image_webp %}{{ config.banner_image_webp.url }}{% else %}{% static 'logement/img/banner.webp' %}{% endif %}"
          type="image/webp"
          fetchpriority="high">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload"
          href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap"
          as="style"
          onload="this.rel='stylesheet'">
    <link rel="stylesheet" href="{% static 'common/css/home.css' %}">
    <link rel="stylesheet"
          href="{% static 'logement/css/logements_grid.css' %}"
          media="print"
          onload="this.media='all'">
    <link rel="preload"
          as="image"
          href="{% static 'logement/img/logement.jpg' %}"
          type="image/jpeg"
          fetchpriority="high">
{% endblock %}
{% block content %}
    <div class="home-page">
        <!-- PROMO BANNER -->
        <div class="promo-banner-launch text-center">
            <span class="promo-badge">OFFRE DE LANCEMENT</span>
            <strong>0% de commission&nbsp;!</strong>
            <span class="promo-text">Profitez-en&nbsp;: aucune commission sur vos réservations.</span>
        </div>
        <header class="hero-banner" style="background: none;">
            <picture>
                <source srcset="{% if config.banner_image_webp %}{{ config.banner_image_webp.url }}{% endif %}"
                        type="image/webp">
                <img src="{% if config.banner_image_optimized %}{{ config.banner_image_optimized.url }}{% endif %}"
                     width="1920"
                     height="600"
                     alt="Banner"
                     class="hero-img"
                     loading="eager"
                     fetchpriority="high">
            </picture>
            <div class="overlay">
                <h1>{{ entreprise.name }}</h1>
                <p>{{ config.devise }}</p>
                <div class="hero-cta-group">
                    <a href="#logements" class="cta-button ">Trouvez votre logement</a>
                    <a href="{% url 'accounts:register' %}?role=proprietaire"
                       class="cta-button cta-owner">Proposer mon bien</a>
                </div>
            </div>
        </header>
        <div class="container my-5">
            <section class="py-5">
                <div class="text-center mb-5">
                    <h2 class="display-5 fw-bold mb-3 section-title-luxury">Louer en toute sérénité avec {{ entreprise.name }}</h2>
                    <div class="luxury-divider"></div>
                    <p class="text-muted lead mx-auto" style="max-width: 700px;">
                        Profitez d’une expérience locale, humaine et transparente pour vos séjours sur la Côte d’Azur. Notre équipe et nos partenaires s’engagent à vous offrir le meilleur, sans compromis.
                    </p>
                </div>
                <div class="row g-5">
                    <div class="col-md-4">
                        <div class="luxury-card h-100">
                            <h3 class="h5 mb-3">
                                <i class="bi bi-cash-coin me-2 text-gold">Tarifs directs & transparents</i>
                            </h3>
                            <p>
                                Chez {{ entreprise.name }}, vous réservez en direct auprès de propriétaires ou conciergeries locales, sans commission cachée ni frais superflus. Nos prix sont affichés clairement, et vous bénéficiez toujours du meilleur rapport qualité/prix.
                                <br>
                                <span class="text-muted small">Paiement 100% sécurisé via Stripe &nbsp;|&nbsp; Données protégées</span>
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="luxury-card h-100">
                            <h3 class="h5 mb-3">
                                <i class="bi bi-geo-alt-fill me-2 text-gold">Professionnels locaux engagés</i>
                            </h3>
                            <p>
                                Tous nos logements sont gérés par des propriétaires ou conciergeries de la région, sélectionnés pour leur sérieux et leur sens de l’accueil. Vous bénéficiez d’un interlocuteur de confiance, proche de vous, qui connaît parfaitement le territoire et s’investit dans la réussite de votre séjour.
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="luxury-card h-100">
                            <h3 class="h5 mb-3">
                                <i class="bi bi-shield-lock me-2 text-gold">Réservation simple & ultra-sécurisée</i>
                            </h3>
                            <p>
                                Réservez en quelques clics depuis votre ordinateur ou mobile. Toutes les disponibilités sont à jour en temps réel, et vos paiements sont traités par Stripe, leader mondial de la sécurité bancaire. Vos données personnelles restent confidentielles et ne sont jamais revendues.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="row g-5 mt-1">
                    <div class="col-md-4">
                        <div class="luxury-card h-100">
                            <h3 class="h5 mb-3">
                                <i class="bi bi-stars me-2 text-gold">Service attentionné & réactif</i>
                            </h3>
                            <p>
                                Notre équipe locale répond à toutes vos questions, avant, pendant et après votre séjour. Pas de robot, pas de plateforme anonyme : un vrai service de proximité, 7j/7, pour que vous soyez accompagné à chaque étape.
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="luxury-card h-100">
                            <h3 class="h5 mb-3">
                                <i class="bi bi-globe-europe-africa me-2 text-gold">Expérience authentique & partagée</i>
                            </h3>
                            <p>
                                Nos hôtes partagent leurs meilleures adresses, conseils et bons plans pour vous faire vivre la Côte d’Azur comme un local. Plus qu’un séjour, une rencontre et une immersion dans la vie locale.
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="luxury-card h-100">
                            <h3 class="h5 mb-3">
                                <i class="bi bi-patch-check-fill me-2 text-gold">Confiance & traçabilité</i>
                            </h3>
                            <p>
                                Chaque réservation est tracée, chaque interlocuteur identifié. Nos CGU sont claires, et vous savez toujours à qui vous avez affaire. Ici, tout est transparent, et vous pouvez réserver en toute confiance.
                            </p>
                        </div>
                    </div>
                </div>
            </section>
            <!-- ENGAGEMENTS -->
            <section class="lux-section alt-bg">
                <div class="lux-section-inner">
                    <h2 class="mb-5 section-title-luxury">Nos engagements</h2>
                    <div class="luxury-divider"></div>
                    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
                        <div class="col">
                            <div class="p-3 border rounded-3 shadow-sm h-100 luxury-card">
                                <picture>
                                    <source srcset="{% static 'common/img/price_commitment.webp' %}"
                                            type="image/webp">
                                    <img src="{% static 'common/img/price_commitment.jpg' %}"
                                         class="img-fluid rounded mb-3"
                                         alt="Tarifs justes"
                                         loading="lazy"
                                         width="400"
                                         height="250">
                                </picture>
                                <i class="bi bi-tag-fill fs-3 text-gold mb-2"></i>
                                <h3 class="fw-bold">Tarifs justes</h3>
                                <p class="text-muted small">Des prix flexibles et compétitifs via nos partenaires de confiance.</p>
                            </div>
                        </div>
                        <div class="col">
                            <div class="p-3 border rounded-3 shadow-sm h-100 luxury-card">
                                <picture>
                                    <source srcset="{% static 'common/img/proximity_commitment.webp' %}"
                                            type="image/webp">
                                    <img src="{% static 'common/img/proximity_commitment.jpg' %}"
                                         class="img-fluid rounded mb-3"
                                         alt="Service réactif"
                                         loading="lazy"
                                         width="400"
                                         height="250">
                                </picture>
                                <i class="bi bi-headset fs-3 text-gold mb-2"></i>
                                <h3 class="fw-bold">Service réactif</h3>
                                <p class="text-muted small">Une assistance personnalisée avant, pendant et après votre séjour.</p>
                            </div>
                        </div>
                        <div class="col">
                            <div class="p-3 border rounded-3 shadow-sm h-100 luxury-card">
                                <picture>
                                    <source srcset="{% static 'common/img/quality_commitment.webp' %}"
                                            type="image/webp">
                                    <img src="{% static 'common/img/quality_commitment.jpg' %}"
                                         class="img-fluid rounded mb-3"
                                         alt="Qualité de service"
                                         loading="lazy"
                                         width="400"
                                         height="250">
                                </picture>
                                <i class="bi bi-house-door fs-3 text-gold mb-2"></i>
                                <h3 class="fw-bold">Logements de qualité</h3>
                                <p class="text-muted small">Bien localisés, propres, bien équipés : standards d’hospitalité moderne.</p>
                            </div>
                        </div>
                        <div class="col">
                            <div class="p-3 border rounded-3 shadow-sm h-100 luxury-card">
                                <picture>
                                    <source srcset="{% static 'common/img/booking_commitment.webp' %}"
                                            type="image/webp">
                                    <img src="{% static 'common/img/booking_commitment.jpg' %}"
                                         class="img-fluid rounded mb-3"
                                         alt="Qualité de Réservation"
                                         loading="lazy"
                                         width="400"
                                         height="250">
                                </picture>
                                <i class="bi bi-lightning-charge-fill fs-3 text-gold mb-2"></i>
                                <h3 class="fw-bold">Réservation simple</h3>
                                <p class="text-muted small">Réservez en quelques clics et partez l’esprit tranquille.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- LOGEMENTS -->
            <section class="lux-section logements-section"
                     id="logements"
                     style="aspect-ratio: 16 / 5;
                            background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.2)), url('{% static "logement/img/logement.jpg" %}');
                            background-size: cover;
                            background-position: center;
                            background-repeat: no-repeat">
                <div class="lux-section-inner">
                    <h2 class="section-title-luxury">Nos logements disponibles</h2>
                    <div class="luxury-divider"></div>
                    {% if logements %}
                        <div class="logements-grid">
                            {% for logement in logements|slice:":6" %}
                                <div class="card logement-card  luxury-card">
                                    <a href="{% url 'logement:view_logement' logement.id %}">
                                        <div class="logement-img-wrapper">
                                            <picture>
                                                <source srcset="{% if logement.photos.first.image_webp %}{{ logement.photos.first.image_webp.url }}{% endif %}"
                                                        type="image/webp">
                                                <img src="{{ logement.photos.first.image.url }}"
                                                     loading="lazy"
                                                     width="400"
                                                     height="250"
                                                     alt="{{ logement.name }}">
                                            </picture>
                                            <div class="logement-badge">
                                                <span><i class="fas fa-building"></i> {{ logement.get_type_display }}</span>
                                                {% if logement.superficie %}<span><i class="fas fa-ruler-combined"></i> {{ logement.superficie }} m²</span>{% endif %}
                                            </div>
                                            <div class="logement-icons-overlay">
                                                {% for equip in logement.equipment.all %}
                                                    {% if equip.name in "Wifi Climatisation Cuisine Lave-linge Télévision Parking gratuit sur place" %}
                                                        <i class="{{ equip.icon }}" title="{{ equip.name }}"></i>
                                                    {% endif %}
                                                {% endfor %}
                                                {% if logement.animals %}
                                                    <i class="fas fa-paw" title="Animaux acceptés"></i>
                                                {% else %}
                                                    <i class="fas fa-paw" style="opacity: 0.4" title="Animaux non autorisés"></i>
                                                {% endif %}
                                                {% if logement.smoking %}
                                                    <i class="fas fa-smoking" title="Fumeurs autorisés"></i>
                                                {% else %}
                                                    <i class="fas fa-smoking-ban" title="Non fumeur"></i>
                                                {% endif %}
                                            </div>
                                            <div class="logement-location">
                                                <i class="fas fa-map-marker-alt"></i> {{ logement.ville }}
                                            </div>
                                        </div>
                                    </a>
                                    <div class="card-body">
                                        <h3 class="logement-title">{{ logement.name }}</h3>
                                        <p class="price">
                                            À partir de {{ logement.price }}€ <span>par nuit</span>
                                        </p>
                                        <div class="logement-details">
                                            <span><i class="fas fa-bed"></i> {{ logement.bedrooms }}</span>
                                            <span><i class="fas fa-bath"></i> {{ logement.bathrooms }}</span>
                                            <span><i class="fas fa-user-friends"></i> {{ logement.max_traveler }}</span>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class="text-center text-muted mt-4">Aucun logement disponible pour cette recherche.</p>
                    {% endif %}
                </div>
                <div class="text-center" style="margin-top: 1rem;">
                    <a href="{% url 'logement:logement_search' %}" class="btn-show-more">Voir tous les logements</a>
                </div>
            </section>
            <!-- JOIN US -->
            <section class="lux-section join-us-section ">
                <div class="lux-section-inner">
                    <div class="row align-items-center join-us-wrapper">
                        <div class="col-md-6 join-text">
                            <h2 class="section-title-luxury">Rejoignez une plateforme locale engagée</h2>
                            <div class="luxury-divider left"></div>
                            <p>
                                Vous êtes propriétaire ou conciergerie ? Offrez à vos biens la visibilité qu’ils méritent tout en gardant le contrôle.
                            </p>
                            <p>
                                Contrairement aux grandes plateformes impersonnelles, nous valorisons la proximité, l’humain, et une relation de confiance.
                            </p>
                            <a href="{% url 'accounts:register' %}"
                               class="btn btn-primary mt-3 mb-3 btn-luxury">Devenir partenaire</a>
                        </div>
                        <div class="col-md-6 text-center">
                            <img src="{% static 'logement/img/local_support.jpg' %}"
                                 alt="Plateforme locale"
                                 class="img-fluid rounded shadow"
                                 width="500"
                                 height="350"
                                 loading="lazy">
                        </div>
                    </div>
                </div>
            </section>
            <!-- CONTACT -->
            <section class="lux-section contact-section" id="contact">
                <div class="lux-section-inner contact-wrapper-luxury">
                    <div class="contact-intro">
                        <div class="contact-icon">
                            <i class="bi bi-envelope-paper-heart"></i>
                        </div>
                        <h2>Contactez-nous</h2>
                        <div class="luxury-divider"></div>
                        <p>
                            Une question, un besoin particulier ou une demande de réservation ?
                            <br>
                            Nous sommes à votre écoute.
                        </p>
                    </div>
                    <div class="contact-card-luxury">
                        <form method="post" action="" class="contact-form">
                            {% csrf_token %}
                            <div class="form-group">
                                {{ contact_form.name.label_tag }}
                                {{ contact_form.name }}
                            </div>
                            <input type="hidden" name="subject" value="Contact depuis le site">
                            <div class="form-group">
                                {{ contact_form.email.label_tag }}
                                {{ contact_form.email }}
                            </div>
                            <div class="form-group">
                                {{ contact_form.message.label_tag }}
                                {{ contact_form.message }}
                            </div>
                            <button type="submit" class="btn-luxury">Envoyer le message</button>
                        </form>
                    </div>
                </div>
            </section>
        </div>
    </div>
{% endblock %}
{% block extra_js %}
    <script src="{% static 'common/js/home.js' %}" defer></script>
{% endblock %}
