{% load static %}
{% for logement in page_obj %}
  <div class="logement-list-card d-flex flex-nowrap align-items-center gap-3 shadow-sm rounded-4 overflow-hidden mb-3 p-2 bg-white">
    <!-- Thumbnail -->
    <div class="flex-shrink-0 logement-thumb-wrapper">
      {% if logement.photos.first %}
        <picture>
          <source srcset="{{ logement.photos.first.image_webp.url }}" type="image/webp">
          <img src="{{ logement.photos.first.image.url }}"
               alt="{{ logement.name }}"
               loading="lazy"
               class="logement-thumb img-fluid rounded">
        </picture>
      {% else %}
        <img src="{% static 'logement/img/no-photo.jpg' %}"
             alt="Aucune photo"
             class="logement-thumb img-fluid rounded">
      {% endif %}
    </div>
    <!-- Info -->
    <div class="flex-grow-1">
      <div class="d-flex justify-content-between align-items-center mb-1">
        <h5 class="mb-0 logement-title">{{ logement.name }}</h5>
        <span class="text-muted small">{{ logement.price }}€ / nuit</span>
      </div>
      <p class="mb-1 text-muted small">
        <i class="fas fa-map-marker-alt me-1"></i> {{ logement.ville }}
      </p>
      <p class="mb-0 text-muted small">
        {{ logement.bedrooms }} chambres · {{ logement.bathrooms }} sdb · {{ logement.max_traveler }} pers
      </p>
    </div>
    <!-- CTA buttons -->
    <div class="ms-auto d-flex flex-column gap-1 align-items-end">
      <a href="{% url 'logement:view_logement' logement.id %}"
         class="btn btn-outline btn-primary btn-sm">Voir</a>
      <a href="{% url 'reservation:book_logement' logement.id %}"
         class="btn btn-secondary btn-sm">Réserver</a>
    </div>
  </div>
{% endfor %}
